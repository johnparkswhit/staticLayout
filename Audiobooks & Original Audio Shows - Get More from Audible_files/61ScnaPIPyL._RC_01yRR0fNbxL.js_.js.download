(function(g){var n=window.AmazonUIPageJS||window.P,v=n._namespace||n.attributeErrors,r=v?v("AudibleBrickCityBaseAssets",""):n;r.guardFatal?r.guardFatal(g)(r,window):r.execute(function(){g(r,window)})})(function(g,n,v){function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");
}function y(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function x(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function r(c,b){if(!(c instanceof
b))throw new TypeError("Cannot call a class as a function");}function E(c,b,e){b in c?Object.defineProperty(c,b,{value:e,enumerable:!0,configurable:!0,writable:!0}):c[b]=e;return c}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function y(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function x(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function y(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function x(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function y(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function x(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function y(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function x(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function r(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}g.when("live").register("accessibleClick",function(c){function b(b){return function(d){if(13===d.keyCode||32===d.keyCode){if(d.target){var a=d.target.getAttribute("disabled")||d.target.getAttribute("aria-disabled");if(a&&
"false"!==a)return}d.preventDefault();b.call(this,d)}}}return{addEventListener:function(c,d){if(!c||"function"!==typeof c.addEventListener)throw Error("accessibleClick.addEventListener: Invalid element");if("function"!==typeof d)throw Error("accessibleClick.addEventListener: Invalid handler");c.addEventListener("click",d);c.addEventListener("keydown",b(d))},live:function(e,d){if("string"!==typeof e)throw Error("accessibleClick.live: Invalid querySelector");if("function"!==typeof d)throw Error("accessibleClick.live: Invalid handler");
c("click",e,d);c("keydown",e,b(d))}}});"use strict";g.register("boxUtility",function(){function c(a,b){var d=a.getBoundingClientRect&&a.getBoundingClientRect();if(!d||d.left===v){for(d={top:0,left:0};a;)a&&(d.top+=a.offsetTop||0,d.left+=a.offsetLeft||0),a=a.offsetParent;b&&(d.top-=e.scrollTop,d.left-=e.scrollLeft);return d}a=d.top;d=d.left;if(!b){b=e;var c=b.scrollLeft;a+=b.scrollTop;d+=c}return{top:a,left:d}}function b(){if("visualViewport"in n){var a=n.visualViewport;return{width:a.width,height:a.height,
left:a.pageLeft,top:a.pageTop}}return{width:d.clientWidth,height:d.clientHeight,left:e.scrollLeft,top:e.scrollTop}}var e=document.scrollingElement||document.documentElement||document.body.parentNode;"number"!==typeof e.scrollLeft&&(e=document.body);var d=document.documentElement||document.body;return{getBox:function(a){var b=a.getBoundingClientRect&&a.getBoundingClientRect();return b&&b.width!==v?{width:b.width,height:b.height}:{width:a.offsetWidth,height:a.offsetHeight}},getAbsoluteOffset:function(a){return c(a,
!1)},getViewportOffset:function(a){return c(a,!0)},getScrollElement:function(){return e},getViewportBox:b,isInView:function(a){if(null==a.offsetParent)return!1;var d=b(),e=c(a,!0);return e.top<=d.height&&0<=e.top+a.offsetHeight&&e.left<=d.width&&0<=e.left+a.offsetWidth}}});"use strict";g.when("accessibleClick","button","Overlay","Spinner").execute(function(c,b,e,d){c.live(".bc-click-behavior",function(a){a=this.getAttribute("data-click-behavior")||"disable";var c=this.getAttribute("data-click-behavior-overlay-type")||
v,m=this.getAttribute("data-click-behavior-overlay-target-id")||v,h=this.getAttribute("data-click-behavior-overlay-content")||v;this.classList.remove("bc-click-behavior");var l=m&&document.getElementById(m)||this,k=b.isButton(l)?l:l.querySelector(".bc-button");"disable"!==a||!k||c||m||h?"disable"===a||"overlay"===a?(l.setAttribute("aria-disabled",!0),e.create(l,c,h)):"spinner"===a&&d.create(l,c,h).start():b.disable(k)})});"use strict";g.register("cookieUtility",function(){var c=n.location.hostname.replace(/^.*\.(audible\.[^.]*)$/,
"$1");return{set:function(b,e){var d=2<arguments.length&&arguments[2]!==v?arguments[2]:{},a=d.expires,d=d.path,d=d===v?"/":d,f=[];f.push(encodeURIComponent(b)+"\x3d"+encodeURIComponent(e));a!==v&&("string"!==typeof a&&(a instanceof Date||(a=new Date(a)),a=a.toUTCString()),f.push("expires\x3d"+a));f.push("path\x3d"+d);f.push("domain\x3d"+c);f.push("secure");document.cookie=f.join("; ")},get:function(b){b=new RegExp(b+"\x3d([^;]*)");for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var a=b.exec(c[d]);
if(a)return decodeURIComponent(a[1])}}}});"use strict";g.when("ready").register("debounce",function(){return function(c,b){var e;return function(){var d=arguments,a=this;clearTimeout(e);e=setTimeout(function(){e=null;c.apply(a,d)},b)}}});"use strict";g.when("ready","outsideContainer").register("focus",function(){return new function(){var c,b,e=document.getElementsByClassName("adbl-page")[0],d=document.getElementById("bc-outside-container"),a=[],f=function(a){return function(b){a:{for(b=b.target.parentNode;null!==
b;){if(b===a){b=!0;break a}b=b.parentNode}b=!1}!1===b&&a.focus()}},m=function(a){d.contains(a)||(a.setAttribute("aria-hidden",!0),d.appendChild(a))},h=function(a){return function(){c&&(document.removeEventListener("focusin",c,!0),c=v,b&&(b.tabIndex=-1,b.setAttribute("aria-hidden",!0)));l(a.focusElement);if(a.focusContainer){var d=a.focusContainer;b=d;c=f(d);b.setAttribute("aria-hidden",!1);b.tabIndex=0;e.setAttribute("aria-hidden",!0);document.addEventListener("focusin",c,!0)}a.isFocusOnLayer||e.setAttribute("aria-hidden",
!1)}},l=function(a){a.tabIndex=0;n.setTimeout(function(){a.focus()},500)},k=function(a){var b=a.getAttribute("data-shift-focus"),d=a.getAttribute("data-contain-focus");return{focusElement:document.getElementById(b),focusContainer:document.getElementById(d),isFocusOnLayer:a.getAttribute("data-shift-layer")}};return{init:function(b){b=b.querySelectorAll(".bc-trigger");if(0<b.length)for(var d=0;d<b.length;d++)if(b[d].hasAttribute("data-shift-focus")){var c=b[d],f=k(c);f.focusContainer&&m(f.focusContainer);
f=h(f);c.addEventListener("click",f);a.push({trigger:c,evnt:f})}},transform:k,change:function(a){a.hasOwnProperty("focusContainer")&&(a.focusContainer?m(a.focusContainer):a.focusContainer=null);return h(a)},updateTrigger:function(b,d){for(var c=a.length,f=0;f<c;f++)a[f].trigger===b&&(a[f].trigger.removeEventListener("click",a[f].evnt),b.addEventListener("click",d),a[f]={trigger:b,evnt:d})},createTrigger:function(b,d){b.addEventListener("click",d);a.push({trigger:b,evnt:d})},removeAllEvents:function(){for(var b=
a.length,d=0;d<b;d++)a[d].trigger.removeEventListener("click",a[d].evnt);a=[]},trapFocus:function(a){var b=a.querySelectorAll('button, a, input, select, textarea, [tabindex\x3d"0"], [tabindex\x3d"1"]'),d=b[0],c=b[b.length-1];a.addEventListener("keydown",function(a){if("Tab"===a.key||9===a.keyCode)a.shiftKey?document.activeElement===d&&(c.focus(),a.preventDefault()):document.activeElement===c&&(d.focus(),a.preventDefault())})},FOCUSABLE_SELECTOR:'button, a, input, select, textarea, [tabindex\x3d"0"], [tabindex\x3d"1"]'}}});
g.when("focus").execute(function(c){c.init(document)});"use strict";g.when("ready").register("lazyload",function(){return function(c,b){c=c.querySelectorAll(b);[].forEach.call(c,function(c){c.src=c.getAttribute("data-lazyload");c.classList.remove(b)})}});g.when("lazyload").register("lazyloadInit",function(c){c(document,".bc-lazy-load")});"use strict";g.register("live",function(){return function(c,b,e){function d(d){var c=document.querySelectorAll(b);if(c)for(var h=d.target;h;){if(-1<Array.prototype.indexOf.call(c,
h)){e.call(h,d,a);break}h=h.parentElement}}function a(){document.removeEventListener(c,d)}document.addEventListener(c,d);return a}});"use strict";g.when("fetch","ready").execute(function(){var c=document.getElementById("adbl_localization_prefs");if(c){var b=c.getAttribute("data-json"),c={};if(b)try{c=JSON.parse(b)}catch(f){"console"in n&&"error"in console&&console.error(f)}var e=c.timezoneOffset,d=c.timezoneName,b=-(new Date).getTimezoneOffset(),a="Intl"in n&&Intl.DateTimeFormat().resolvedOptions().timeZone,
e=!isNaN(b)&&e!==b,d=a&&a!==d;if(e||d)e&&(c.timezoneOffset=b),d&&(c.timezoneName=a),n.fetch("/api/prefs/localization",{method:"POST",headers:{"Content-Type":"application/json; charset\x3dutf-8"},body:JSON.stringify(c)})}});"use strict";g.register("observer",function(){var c=n.MutationObserver||n.WebKitMutationObserver,b=n.addEventListener;return function(e,d){c?(new c(function(a,b){(a[0].addedNodes.length||a[0].removedNodes.length)&&d()})).observe(e,{childList:!0,subtree:!0}):b&&(e.addEventListener("DOMNodeInserted",
d,!1),e.addEventListener("DOMNodeRemoved",d,!1))}});"use strict";g.register("readySetup",function(){function c(){if(!b)try{g.when("Polyfills").execute(function(){var b;g.now("a-base").execute(function(d){b=d});b||g.register("ready",function(){return!0})})}catch(c){}finally{b=!0}}var b=!1;"complete"===document.readyState?c():document.addEventListener?(document.addEventListener("DOMContentLoaded",c),n.addEventListener("load",c)):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&
c()})});"use strict";var t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.register("StrictEvents",function(){var c=function(){function d(a){var b=this;r(this,d);if(!Array.isArray(a))throw new TypeError("missing eventTypes array");this._eventTypes=a;this._handlersByEventType={};this._eventTypes.forEach(function(a){b._handlersByEventType[a]=
[]})}t(d,[{key:"on",value:function(a,b,d){var c=this;a=Array.isArray(a)?a:this._splitEventTypes(a);a.forEach(function(a){c._on(a,b,d)});return function(){return c.off(a,b)}}},{key:"once",value:function(a,b,d){var c=this,e=this.on(a,function(a){e();b.call(d||c)},d);return e}},{key:"_on",value:function(a,b,d){this._checkValidEventType(a);this._handlersByEventType[a].push(new e(b,d))}},{key:"_splitEventTypes",value:function(a){return a.split(/,\s*|\s+/)}},{key:"off",value:function(a,b){var d=this;(Array.isArray(a)?
a:this._splitEventTypes(a)).forEach(function(a){return d._off(a,b)})}},{key:"_off",value:function(a,b){this._checkValidEventType(a);if(b){if("function"!==typeof b)throw new TypeError("wrong type for func argument");a in this._handlersByEventType&&(this._handlersByEventType[a]=this._handlersByEventType[a].filter(function(a){return!a.isFunc(b)}))}else this._handlersByEventType[a]=[]}},{key:"emit",value:function(a,d){this._checkValidEventType(a);var c=new b(a);return this._handlersByEventType[a].every(function(a){!1===
a.call(c,d)&&c.stopPropagation();if(!c.isPropagationStopped())return!0})}},{key:"_checkValidEventType",value:function(a){if(!this._handlersByEventType[a])throw new TypeError('eventType: "'+a+'" not supported,\n  supported event types are:\n  '+this._eventTypes.join(","));}}]);return d}(),b=function(){function b(a){r(this,b);this.eventType=a}t(b,[{key:"stopPropagation",value:function(){this._isPropagationStopped=!0}},{key:"isPropagationStopped",value:function(){return this._isPropagationStopped}}]);
return b}(),e=function(){function b(a,c){r(this,b);this._func=a;this._thisArg=c}t(b,[{key:"call",value:function(a,b){this._func.call(this._thisArg||null,a,b||{})}},{key:"isFunc",value:function(a){return this._func===a}}]);return b}();return c});"use strict";(function(){g.when("ready").execute(function(){var c=document.querySelector(".adbl-page.desktop")?!0:!1,b=document.querySelector(".adbl-page.mobile")?!0:!1;c&&(g.register("desktop",!0),g.register("device","desktop"));b&&(g.register("mobile",!0),
g.register("device","mobile"))});g.when("ready").register("outsideContainer",function(){var c=document.querySelector(".adbl-page.desktop")?!0:!1,b=document.querySelector(".adbl-page.mobile")?!0:!1,e=document.createElement("div"),d=e.className;e.setAttribute("id","bc-outside-container");c&&(d+=" desktop");b&&(d+=" mobile");e.className=d;document.body.appendChild(e)});g.register("ajax",function(){function c(b,d,a){b[d]=b[d]||a}var b=["responseType","withCredentials","timeout","onprogress"];return function(e,
d){function a(a,b){return d?function(){l||(d(k.status===v?a:k.status,0===k.status?"Error":k.response||k.responseText||b,k),l=!0)}:function(){}}var f=e.headers||{},m=e.body,h=e.method||(m?"POST":"GET"),l=!1,k;k=n.XMLHttpRequest?new XMLHttpRequest:void 0;k.open(h,e.url,!0);var A=k.onload=a(200);k.onreadystatechange=function(){4===k.readyState&&A()};k.onerror=a(null,"Error");k.ontimeout=a(null,"Timeout");k.onabort=a(null,"Abort");m&&c(f,"X-Requested-With","XMLHttpRequest");"POST"===h&&c(f,"Content-type",
"application/x-www-form-urlencoded");for(var h=0,w=b.length,p;h<w;h++)p=b[h],e[p]!==v&&(k[p]=e[p]);for(p in f)f.hasOwnProperty(p)&&k.setRequestHeader(p,f[p]);k.send(m);return k}});g.when("ajax").register("aud-ajax",function(c){return c})})();"use strict";g.when("ready").register("transitionEvent",function(){return function(){var c,b=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};
for(c in e)if(b.style[c]!==v)return e[c]}});"use strict";g.when("debounce","ready","outsideContainer").register("trayHelper",function(c){var b=function(){return function(a){var b=0,d=n.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=a.querySelectorAll(".tray-fixed");[].forEach.call(c,function(a,d){b+=a.offsetHeight});a.classList.contains("bc-tray-full-height")?a.querySelector(".tray-wrapper").style.height=d-b+"px":a.querySelector(".tray-wrapper").style.maxHeight=d-
b+"px"}},e=function(){return function(a){return(a=a.getAttribute("data-trigger"))?document.getElementById(a):null}},d;return{get:e,setHeight:b,resize:function(a){var d=e(),m=b();return c(function(){var b,c;for(c=0;c<a.length;c++)a[c].getAttribute("data-trigger")&&(b=d(a[c]),m(b))},500)},lockBody:function(a){var b=document.body,c=b.classList;"add"===a?(d=b.scrollTop||document.documentElement.scrollTop,b.style.top=d?"-"+d+"px":0,b.style.position="fixed"):(b.style.removeProperty?(b.style.removeProperty("top"),
b.style.removeProperty("position")):(b.style.removeAttribute("top"),b.style.removeAttribute("position")),(document.scrollingElement||document.documentElement).scrollTop=d);c[a]("bc-locked")}}});"use strict";var C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};g.register("promise",function(){function c(){function b(){}function c(a,b){return function(){a.apply(b,
arguments)}}function d(a){if("object"!==C(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=v;this._deferreds=[];k(a,this)}function a(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,d._immediateFn(function(){var d=1===a._state?b.onFulfilled:b.onRejected;if(null===d)(1===a._state?f:m)(b.promise,a._value);else{var c;try{c=d(a._value)}catch(e){m(b.promise,
e);return}f(b.promise,c)}}))}function f(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===("undefined"===typeof b?"undefined":C(b))||"function"===typeof b)){var f=b.then;if(b instanceof d){a._state=3;a._value=b;h(a);return}if("function"===typeof f){k(c(f,b),a);return}}a._state=1;a._value=b;h(a)}catch(l){m(a,l)}}function m(a,b){a._state=2;a._value=b;h(a)}function h(b){2===b._state&&0===b._deferreds.length&&d._immediateFn(function(){b._handled||d._unhandledRejectionFn(b._value)});
for(var c=0,e=b._deferreds.length;c<e;c++)a(b,b._deferreds[c]);b._deferreds=null}function l(a,b,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=d}function k(a,b){var d=!1;try{a(function(a){d||(d=!0,f(b,a))},function(a){d||(d=!0,m(b,a))})}catch(c){d||(d=!0,m(b,c))}}var A=setTimeout;d.prototype["catch"]=function(a){return this.then(null,a)};d.prototype.then=function(d,c){var e=new this.constructor(b);a(this,new l(d,c,e));return e};d.all=function(a){var b=
Array.prototype.slice.call(a);return new d(function(a,d){function c(h,f){try{if(f&&("object"===("undefined"===typeof f?"undefined":C(f))||"function"===typeof f)){var m=f.then;if("function"===typeof m){m.call(f,function(a){c(h,a)},d);return}}b[h]=f;0===--e&&a(b)}catch(l){d(l)}}if(0===b.length)return a([]);for(var e=b.length,h=0;h<b.length;h++)c(h,b[h])})};d.resolve=function(a){return a&&"object"===("undefined"===typeof a?"undefined":C(a))&&a.constructor===d?a:new d(function(b){b(a)})};d.reject=function(a){return new d(function(b,
d){d(a)})};d.race=function(a){return new d(function(b,d){for(var c=0,e=a.length;c<e;c++)a[c].then(b,d)})};d._immediateFn="function"===typeof n.setImmediate&&function(a){n.setImmediate(a)}||function(a){A(a,0)};d._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};d._setImmediateFn=function(a){d._immediateFn=a};d._setUnhandledRejectionFn=function(a){d._unhandledRejectionFn=a};return d}return"function"===typeof n.Promise?n.Promise:
n.Promise=c});"use strict";g.when("promise").register("fetch",function(){(function(c){function b(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function e(a){"string"!==typeof a&&(a=String(a));return a}function d(a){var b={next:function(){var b=a.shift();return{done:b===v,value:b}}};u.iterable&&(b[Symbol.iterator]=function(){return b});return b}function a(b){this.map={};b instanceof
a?b.forEach(function(a,b){this.append(b,a)},this):b&&Object.getOwnPropertyNames(b).forEach(function(a){this.append(a,b[a])},this)}function f(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function m(a){return new Promise(function(b,d){a.onload=function(){b(a.result)};a.onerror=function(){d(a.error)}})}function h(a){var b=new FileReader;b.readAsArrayBuffer(a);return m(b)}function l(){this.bodyUsed=!1;this._initBody=function(a){this._bodyInit=a;if("string"===typeof a)this._bodyText=
a;else if(u.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(u.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(u.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(!a)this._bodyText="";else if(!u.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw Error("unsupported BodyInit type");this.headers.get("content-type")||("string"===typeof a?this.headers.set("content-type","text/plain;charset\x3dUTF-8"):this._bodyBlob&&
this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset\x3dUTF-8"))};u.blob?(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(h)},
this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob){var a=this._bodyBlob,b=new FileReader;b.readAsText(a);return m(b)}if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=f(this);return a?a:Promise.resolve(this._bodyText)};u.formData&&(this.formData=function(){return this.text().then(A)});this.json=function(){return this.text().then(JSON.parse)};return this}function k(b,d){d=d||{};var c=d.body;
if(k.prototype.isPrototypeOf(b)){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url;this.credentials=b.credentials;d.headers||(this.headers=new a(b.headers));this.method=b.method;this.mode=b.mode;c||(c=b._bodyInit,b.bodyUsed=!0)}else this.url=b;this.credentials=d.credentials||this.credentials||"omit";if(d.headers||!this.headers)this.headers=new a(d.headers);b=d.method||this.method||"GET";var e=b.toUpperCase();this.method=-1<n.indexOf(e)?e:b;this.mode=d.mode||this.mode||null;this.referrer=
null;if(("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function A(a){var b=new FormData;a.trim().split("\x26").forEach(function(a){if(a){var d=a.split("\x3d");a=d.shift().replace(/\+/g," ");d=d.join("\x3d").replace(/\+/g," ");b.append(decodeURIComponent(a),decodeURIComponent(d))}});return b}function w(b){var d=new a;(b.getAllResponseHeaders()||"").trim().split("\n").forEach(function(a){var b=a.trim().split(":");a=b.shift().trim();
b=b.join(":").trim();d.append(a,b)});return d}function p(b,d){d||(d={});this.type="default";this.status=d.status;this.ok=200<=this.status&&300>this.status;this.statusText=d.statusText;this.headers=d.headers instanceof a?d.headers:new a(d.headers);this.url=d.url||"";this._initBody(b)}if(!c.fetch){var q="Symbol"in c&&"iterator"in Symbol,g;if(g="FileReader"in c&&"Blob"in c)try{new Blob,g=!0}catch(B){g=!1}var u={searchParams:"URLSearchParams"in c,iterable:q,blob:g,formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in
c};a.prototype.append=function(a,d){a=b(a);d=e(d);var c=this.map[a];c||(c=[],this.map[a]=c);c.push(d)};a.prototype["delete"]=function(a){delete this.map[b(a)]};a.prototype.get=function(a){return(a=this.map[b(a)])?a[0]:null};a.prototype.getAll=function(a){return this.map[b(a)]||[]};a.prototype.has=function(a){return this.map.hasOwnProperty(b(a))};a.prototype.set=function(a,d){this.map[b(a)]=[e(d)]};a.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(d){this.map[d].forEach(function(c){a.call(b,
c,d,this)},this)},this)};a.prototype.keys=function(){var a=[];this.forEach(function(b,d){a.push(d)});return d(a)};a.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return d(a)};a.prototype.entries=function(){var a=[];this.forEach(function(b,d){a.push([d,b])});return d(a)};u.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var n="DELETE GET HEAD OPTIONS POST PUT".split(" ");k.prototype.clone=function(){return new k(this)};l.call(k.prototype);l.call(p.prototype);
p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})};p.error=function(){var a=new p(null,{status:0,statusText:""});a.type="error";return a};var r=[301,302,303,307,308];p.redirect=function(a,b){if(-1===r.indexOf(b))throw new RangeError("Invalid status code");return new p(null,{status:b,headers:{location:a}})};c.Headers=a;c.Request=k;c.Response=p;c.fetch=function(a,b){return new Promise(function(d,c){var e;
e=k.prototype.isPrototypeOf(a)&&!b?a:new k(a,b);var h=new XMLHttpRequest;"onload"in h||(h.onreadystatechange=function(){if(4==h.readyState){var a=1223===h.status?204:h.status;!a||200<=a&&300>a||304==a?h.onload&&h.onload():h.onerror&&h.onerror();h.onreadystatechange=null}});h.onload=function(){var a=h.status,b=h.statusText,c=w(h),e;e="responseURL"in h?h.responseURL:/^X-Request-URL:/m.test(h.getAllResponseHeaders())?h.getResponseHeader("X-Request-URL"):void 0;d(new p("response"in h?h.response:h.responseText,
{status:a,statusText:b,headers:c,url:e}))};h.onerror=function(){c(new TypeError("Network request failed"))};h.ontimeout=function(){c(new TypeError("Network request failed"))};h.open(e.method,e.url,!0);"include"===e.credentials&&(h.withCredentials=!0);"responseType"in h&&u.blob&&(h.responseType="blob");e.headers.forEach(function(a,b){h.setRequestHeader(b,a)});h.send("undefined"===typeof e._bodyInit?null:e._bodyInit)})};c.fetch.polyfill=!0}})(n)});"use strict";g.when("readySetup").register("Polyfills",
function(){(function(){function c(a){this.el=a;a=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var b=0;b<a.length;b++)d.call(this,a[b])}function b(a,b,d){Object.defineProperty?Object.defineProperty(a,b,{get:d}):a.__defineGetter__(b,d)}if(!("undefined"===typeof n.Element||"classList"in document.documentElement)){var e=Array.prototype,d=e.push,a=e.splice,f=e.join;c.prototype={add:function(){for(var a=0;a<=arguments.length;a++)d.call(this,arguments[a]);this.el.className=this.toString()},contains:function(a){return-1!=
this.el.className.indexOf(a)},item:function(a){return this[a]||null},remove:function(b){if(this.contains(b)){for(var d=0;d<this.length&&this[d]!=b;d++);a.call(this,d,1);this.el.className=this.toString()}},toString:function(){return f.call(this," ")},toggle:function(a){this.contains(a)?this.remove(a):this.add(a);return this.contains(a)}};n.DOMTokenList=c;b(Element.prototype,"classList",function(){return new c(this)})}})();(function(){var c=document.createElement("div");c.classList.add("c1","c2");c.classList.contains("c2")||
(c=function(b){var c=DOMTokenList.prototype[b];DOMTokenList.prototype[b]=function(b){var a,f=arguments.length;for(a=0;a<f;a++)b=arguments[a],c.call(this,b)}},c("add"),c("remove"))})();(function(){if(!document.getElementsByClassName){var c=[].indexOf||function(b){for(var c=0;c<this.length;c++)if(this[c]===b)return c;return-1};getElementsByClassName=function(b,e){if(document.querySelectorAll)b=e.querySelectorAll("."+b);else{e=e.getElementsByTagName("*");for(var d=[],a=0;a<e.length;a++)e[a].className&&
-1<(" "+e[a].className+" ").indexOf(" "+b+" ")&&-1===c.call(d,e[a])&&d.push(e[a]);b=d}return b};document.getElementsByClassName=function(b){return getElementsByClassName(b,document)};Element&&(Element.prototype.getElementsByClassName=function(b){return getElementsByClassName(b,this)})}})();(function(c,b,e){if((!c.addEventListener||!c.removeEventListener)&&c.attachEvent&&c.detachEvent){var d=function(a,b){if(b=b[e])for(var d,c=b.length;c--;)if(d=b[c],d[0]===a)return d[1]},a=function(a,b,c){var h=b[e]||
(b[e]=[]);return d(a,b)||(h[h.length]=[a,c],c)},f=function(a){var d=b[a];b[a]=function(a){return l(d(a))}},m=function(d,h,e){if("function"===typeof h){var f=this;f.attachEvent("on"+d,a(f,h,function(a){a=a||c.event;a.preventDefault=a.preventDefault||function(){a.returnValue=!1};a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0};a.target=a.target||a.srcElement||b.documentElement;a.currentTarget=a.currentTarget||f;a.timeStamp=a.timeStamp||(new Date).getTime();h.call(f,a)}))}},h=function(a,
b,c){"function"===typeof b&&(b=d(this,b))&&this.detachEvent("on"+a,b)},l=function(a){var b=a.length;if(b)for(;b--;)a[b].addEventListener=m,a[b].removeEventListener=h;else a.addEventListener=m,a.removeEventListener=h;return a};l([b,c]);"Element"in c?(f=c.Element,f.prototype.addEventListener=m,f.prototype.removeEventListener=h):(b.attachEvent("onreadystatechange",function(){l(b.all)}),f("getElementsByTagName"),f("getElementById"),f("createElement"),l(b.all))}})(n,document,"x-ms-event-listeners");(function(c,
b,e){Array.isArray||(Array.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)})})();Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c,b){if(null==this)throw TypeError('"this" is null or not defined');var e=Object(this),d=e.length>>>0;if("function"!==typeof c)throw TypeError("predicate must be a function");for(var a=0;a<d;){var f=e[a];if(c.call(b,f,a,e))return f;a++}return v},configurable:!0,writable:!0});Function.prototype.bind||(Function.prototype.bind=
function(c){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),e=this,d=function(){},a=function(){return e.apply(this instanceof d?this:c,b.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(d.prototype=this.prototype);a.prototype=new d;return a});(function(){try{new CustomEvent("?")}catch(c){this.CustomEvent=function(b,c){function d(a,d,c,h){this["init"+b](a,d,c,h);"detail"in
this||(this.detail=h)}return function(a,f){var m=document.createEvent(b);null!=a?d.call(m,a,(f||(f=c)).bubbles,f.cancelable,f.detail):m.initCustomEvent=d;return m}}(this.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(c){var b=this;if(!document.documentElement.contains(b))return null;
do{if(b.matches(c))return b;b=b.parentElement||b.parentNode}while(null!==b&&1===b.nodeType);return null})});"use strict";g.when("AutocompleteInput","AutocompleteDispatcher").register("autocomplete",function(c,b){return function(e,d,a){if(!HTMLElement.prototype.isPrototypeOf(e))throw Error("autocomplete: invalid wrapperElement");if("function"!==typeof d)throw Error("autocomplete: invalid getSuggestions callback");e=new c(e,a);a=e.showSuggestions.bind(e);var f=e.onInput.bind(e);new b(d,a,f);return e}});
"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.register("AutocompleteDispatcher",function(){return function(){function c(b,e,d){r(this,c);this._fetchSuggestions=b;this._showSuggestions=e;d(this.update.bind(this));this._debounceTimeout=this._cancel=null;this._suggestionsByQuery={}}t(c,[{key:"update",
value:function(b){var c=this;this.cancel();this.getQueryKey(b)&&(this._debounceTimeout=setTimeout(function(){c._debounceTimeout=null;c._update(b)},120))}},{key:"_update",value:function(b){var c=this,d=this.getCachedSuggestions(b);if(d)this.showSuggestions(d);else{var a=!1,f=this.fetchSuggestions(b,function(d){d?(c.cacheSuggestions(b,d),a||(c._cancel=null,c.showSuggestions(d))):g.log("Autocomplete fetchSuggestions failed","ERROR","AudibleBrickCitySkin.AutocompleteDispatcher")});this._cancel=function(){a=
!0;f&&f();c._cancel=null}}}},{key:"fetchSuggestions",value:function(b,c){return this._fetchSuggestions(b,function(b){c(b&&b.map(function(a){return"string"===typeof a?{display:a}:a}))})}},{key:"showSuggestions",value:function(b){this._showSuggestions(b)}},{key:"cancel",value:function(){null!==this._debounceTimeout?(clearTimeout(this._debounceTimeout),this._debounceTimeout=null):this._cancel&&this._cancel()}},{key:"cacheSuggestions",value:function(b,c){this._suggestionsByQuery[this.getQueryKey(b)]=
c}},{key:"getCachedSuggestions",value:function(b){return this._suggestionsByQuery[this.getQueryKey(b)]}},{key:"getQueryKey",value:function(b){return b.display}}]);return c}()});"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("debounce","StrictEvents").register("AutocompleteInput",function(c,
b){b=function(b){function a(b){var d=1<arguments.length&&arguments[1]!==v?arguments[1]:null;r(this,a);var c=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,["input","showSuggestions","hideSuggestions","repositionSuggestions"]));c._wrapperElement=b;c._goCallback=d;c._selectedSuggestionIndex=null;c._suggestionsShowing=!1;c._render();c._addEventListeners();c._inputElement.hasAttribute("data-initial-value")&&c._inputElement.getAttribute("data-initial-value")!=c._inputElement.value&&setTimeout(function(){return c.emit("input")});
return c}x(a,b);t(a,[{key:"onInput",value:function(a){var b=this;this.on("input",function(d,c){a({display:String(b._inputElement.value).trim()})})}},{key:"go",value:function(){this._go(this._selectedQueryData||{display:this._inputElement.value})}},{key:"_go",value:function(a){if(a.display)if(this._inputElement.value=a.display,this._goCallback)this._goCallback(a);else if(this._formElement)this._formElement.submit();else throw Error("bc:autocomplete - no go callback NOR form element found to submit");
}},{key:"showSuggestions",value:function(a){var b=this;this._selectedSuggestionIndex=null;this._suggestionsContainer.innerHTML="";this._suggestions=a.map(function(a){return new e(a,b._suggestionsContainer,b._go.bind(b))});this._noResultsElement&&(this._suggestions.length?this._noResultsElement.classList.add("bc-pub-hidden"):this._noResultsElement.classList.remove("bc-pub-hidden"));this._suggestionsShowing=!0;this._suggestionsWrapper.classList.remove("bc-pub-hidden");this._suggestionsWrapper.style.width=
this._inputElement.offsetWidth+"px";this.repositionSuggestions();this.emit("showSuggestions",{suggestionsWrapper:this._suggestionsWrapper})}},{key:"hideSuggestions",value:function(){this._suggestionsShowing=!1;this._suggestionsWrapper.classList.add("bc-pub-hidden");this.emit("hideSuggestions",{suggestionsWrapper:this._suggestionsWrapper})}},{key:"repositionSuggestions",value:function(){if(this._suggestionsShowing){var a=this._getSpaceAroundInput();if(a!==v){var b=a.spaceAbove,a=a.spaceBelow,d=this._suggestionsWrapper.offsetHeight<
a||a>b;this._suggestionsWrapper.style.overflow="auto";this._suggestionsWrapper.style[d?"bottom":"top"]="";this._suggestionsWrapper.style[d?"top":"bottom"]=this._inputElement.offsetHeight+"px";this._suggestionsWrapper.style.maxHeight=(d?a:b)+"px";this._suggestionsWrapper.classList[d?"add":"remove"]("bc-autocomplete-suggestions-below");this._suggestionsWrapper.classList[d?"remove":"add"]("bc-autocomplete-suggestions-above");this.emit("repositionSuggestions",{suggestionsWrapper:this._suggestionsWrapper,
showBelow:d,spaceAbove:b,spaceBelow:a})}}}},{key:"_getSpaceAroundInput",value:function(){if(this._inputElement.getBoundingClientRect){var a=this._inputElement.getBoundingClientRect();if(a.top!==v)return{spaceAbove:a.top,spaceBelow:n.innerHeight-a.bottom}}}},{key:"_render",value:function(){this._formElement=this._wrapperElement.querySelector("form");this._inputElement=this._wrapperElement.querySelector("input");this._suggestionsWrapper=this._wrapperElement.getElementsByClassName("bc-autocomplete-suggestions-wrapper")[0];
this._suggestionsContainer=this._wrapperElement.getElementsByClassName("bc-autocomplete-suggestions-container")[0];this._noResultsElement=this._suggestionsWrapper.getElementsByClassName("bc-autocomplete-no-results")[0]}},{key:"_addEventListeners",value:function(){var a=this;this._inputElement.addEventListener("keyup",function(b){switch(b.keyCode){case 40:a.selectNext();break;case 38:a.selectPrevious();break;case 27:a.hideSuggestions()}});this._inputElement.addEventListener("blur",this.hideSuggestions.bind(this));
this._suggestionsWrapper.addEventListener("mousedown",function(a){return a.preventDefault()});this._suggestionsWrapper.addEventListener("click",function(b){return setTimeout(a.hideSuggestions.bind(a))});this._formElement&&this._formElement.addEventListener("submit",function(b){b.preventDefault();a.go()});this._inputElement.addEventListener("input",this.emit.bind(this,["input"]));this.onInput(function(b){a._selectedQueryData&&b.display!==a._selectedQueryData.display&&(a._selectedQueryData=b);b.display||
a.hideSuggestions()});var b=c(this.repositionSuggestions.bind(this),100);n.addEventListener("resize",b);n.addEventListener("scroll",b)}},{key:"selectNext",value:function(){this.select(null===this._selectedSuggestionIndex?0:(this._selectedSuggestionIndex+1)%this._suggestions.length)}},{key:"selectPrevious",value:function(){this.select((this._selectedSuggestionIndex||this._suggestions.length)-1)}},{key:"select",value:function(a){var b=null!==this._selectedSuggestionIndex&&this._suggestions[this._selectedSuggestionIndex];
b&&b.deselect();this._selectedSuggestionIndex=a;a=this._suggestions[a];a.select();this._inputElement.value=a.queryData.display;this._selectedQueryData=a.queryData}}]);return a}(b);var e=function(){function b(a,c,e){r(this,b);this.queryData=a;var h=this.element=document.createElement("div");h.innerHTML=a.display;h.classList.add("bc-autocomplete-suggestion-row");h.classList.add("bc-autocomplete-suggestion-link");c.appendChild(h);h.addEventListener("click",function(){return e(a)})}t(b,[{key:"select",
value:function(){this.element.classList.add("bc-autocomplete-selected")}},{key:"deselect",value:function(){this.element.classList.remove("bc-autocomplete-selected")}}]);return b}();return b});"use strict";g.when("trayHelper","transitionEvent","focus","ready","mobile").register("actionsheet",function(c,b,e){var d;return new function(){function a(a){document.querySelectorAll(".action-sheet-active")[0]?(d.classList.remove("bc-hidden"),c.lockBody("add")):(d.classList.add("bc-hidden"),c.lockBody("remove"),
a&&a())}function f(a,b){t?a.addEventListener(t,function I(d){a.removeEventListener(t,I);b()}):setTimeout(b)}function m(b,d){d=!1;"string"===typeof b&&(b=document.getElementById(b));p!==b&&(g=p,p=b);g&&(d=g.classList.contains("action-sheet-active"));!0===d?(f(g,function(){p.style.visibility="visible";p.classList.add("show-tray");p.classList.add("action-sheet-active")}),g.classList.remove("action-sheet-active"),g.classList.remove("show-tray")):(p.classList.contains("action-sheet-active")?(p.classList.remove("show-tray"),
p.classList.remove("action-sheet-active"),f(p,function(){p.style.visibility="hidden"})):(p.classList.add("action-sheet-active"),p.classList.add("show-tray"),p.style.visibility="visible"),a())}function h(){var b;b=p.getElementsByClassName("bc-core-actionsheet-cancel")[0];b.hasAttribute("data-shift-focus")?(b=e.transform(b),b=e.change(b)):b=void 0;p.classList.remove("action-sheet-active");p.classList.remove("show-tray");a();b&&b()}function l(a,b){var d=function(d){d.preventDefault();m(a,b)};b.addEventListener("click",
d);q.push({trigger:b,evnt:d})}var k,A,g,p,q=[],z,u=c.setHeight(),r=c.get(),t=b();return{init:function(a){d=document.querySelector(".bc-overlay-legacy");null===d&&(d=document.createElement("div"),d.className="bc-overlay-legacy",document.body.appendChild(d));var b={},e=document.getElementById("bc-outside-container");k=[];k=a.querySelectorAll(".bc-trigger-actionsheet");for(A=0;A<k.length;A++)k[A].getAttribute("data-trigger")&&(a=r(k[A]),u(a),l(a,k[A]),b[a.id]===v&&(e.appendChild(a),b[a.id]=a));z=c.resize(k);
d.addEventListener("click",h);n.addEventListener("resize",z)},remove:function(){q.forEach(function(a){a.trigger.removeEventListener("click",a.evnt)});d.removeEventListener("click",h);n.removeEventListener("resize",z)},toggle:m}}});g.when("actionsheet").execute(function(c){document.getElementsByClassName("bc-trigger-actionsheet")&&c.init(document)});"use strict";g.register("button",function(){function c(b){if(!e(b))throw"Not a button";b.classList.remove("bc-button-disabled");b=b.querySelector(".bc-button-text");
if(!b)throw"Not A Valid Button";"A"===b.nodeName?b.setAttribute("aria-disabled","false"):b.disabled=!1}function b(b){if(!e(b))throw"Not a button";b.classList.add("bc-button-disabled");b=b.querySelector(".bc-button-text");if(!b)throw"Not A Valid Button";"A"===b.nodeName?b.setAttribute("aria-disabled","true"):b.disabled=!0}function e(b){return b&&0<=b.nodeType&&b.classList.contains("bc-button")}return{instance:function(d){if(!e(d))throw"Not a button";this.enable=function(){c(d)};this.disable=function(){b(d)}},
enable:c,disable:b,isButton:e}});"use strict";(function(c){c.register("buttonGroupInit",function(){var b=[],c=function(a){this.element=a;this.children=a.querySelectorAll(".bc-button, .bc-button-group-box");this.length=this.children.length;this.activeElement=v};c.prototype.active=function(a){return function(b){var d;b="undefined"===typeof b.target?b:this;var c=["bc-button-selected","bc-box-selected"];if(a.activeElement&&a.activeElement!==b){var e;(e=a.activeElement.classList).remove.apply(e,c);a.activeElement.setAttribute("aria-checked",
!1)}(d=b.classList).add.apply(d,c);b.setAttribute("aria-checked",!0);a.activeElement=b}};c.prototype.addEvent=function(){this.scopedActive=this.active(this);this.scopedKeyPress=d(this);for(var a=0;a<this.length;a++)this.children[a].addEventListener("click",this.scopedActive),this.children[a].addEventListener("keydown",this.scopedKeyPress)};c.prototype.removeEvent=function(){for(var a=0;a<this.length;a++)this.children[a].removeEventListener("click",this.scopedActive),this.children[a].removeEventListener("keydown",
this.scopedKeyPress)};var d=function(a){return function(b){var d=a.active(a);32===b.keyCode&&(b.preventDefault(),d(this))}};return{init:function(a){a=a.getElementsByClassName("bc-button-group");var d=a.length;if(0<b.length){if(0<b.length)for(var m=0;m<b.length;m++)b[m].removeEvent();else console.error("no elements to attach to.");b=[]}for(m=0;m<d;m++){var h=new c(a[m]);b.push(h)}if(0<b.length)for(a=0;a<b.length;a++)b[a].addEvent();else console.error("no elements to attach to.")}}});c.when("buttonGroupInit",
"ready").execute(function(b){0<document.getElementsByClassName("bc-button-group").length&&b.init(document)})})(g);"use strict";g.register("image",function(){return{update:function(c,b,e,d){d&&e?(c.onload=c.onerror=function(){c.onload=null;c.onerror=function(){c.src=b};c.src=e},c.src=b):e&&!d?(c.onerror=function(){c.onerror=null;c.src=b},c.src=e):c.src=b}}});"use strict";g.when("live","ready").execute(function(c){c("click",".bc-core-inline-alert-close",function(b){for(b=b.target;null!==b;){if(b.hasAttribute("role")){var c=
b.getAttribute("role");if("alertdialog"===c||"dialog"===c){b.classList.add("bc-hidden");break}}b=b.parentNode}})});"use strict";(function(){var c=!1;document.body.addEventListener("keydown",function(b){c=!1});document.body.addEventListener("mousedown",function(b){c=!0});document.body.addEventListener("focusin",function(b){c&&b.target&&b.target.classList.add("bc-focus-mouse")});document.body.addEventListener("focusout",function(b){b.target&&b.target.classList.remove("bc-focus-mouse")})})();"use strict";
C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};g.when("aud-ajax").register("aud-reviews",function(c){var b=function(a,b,d){c({method:"POST",url:"/set-rating",body:"asin\x3d"+encodeURIComponent(a.asin)+"\x26rating\x3d"+encodeURIComponent(a.rating)+"\x26ratingType\x3d"+encodeURIComponent(a.ratingType)+"\x26appAction\x3d"+encodeURIComponent(a.appAction)+
"\x26appActionToken\x3d"+encodeURIComponent(a.appActionToken)},function(c,e,k){200===c?"function"===typeof b&&b(a):"function"===typeof d&&d(a,k)})},e=function(a,b){for(var d=[],c=0;c<a.classList.length;c+=1)a.classList[c]!==b&&d.push(a.classList[c]);a.className=d.join(" ")},d=function(a,b,d,c){c&&a.getElementsByTagName("input")[0].setAttribute("data-rating",b);a=a.getElementsByTagName("i");c="left"===d?0:5;for(var l=0;5>l;l+=1)"left"===d?c+1<=b?(e(a[l],"bc-icon-star-hollow"),e(a[l],"bc-icon-star-half-left"),
e(a[l],"bc-icon-star-half-right"),a[l].classList.add("bc-icon-star"),c+=1):c+.5<=b?(e(a[l],"bc-icon-star"),e(a[l],"bc-icon-star-hollow"),e(a[l],"bc-icon-star-half-right"),a[l].classList.add("bc-icon-star-half-left"),c+=.5):(e(a[l],"bc-icon-star"),e(a[l],"bc-icon-star-half-left"),e(a[l],"bc-icon-star-half-right"),a[l].classList.add("bc-icon-star-hollow")):"right"===d&&(c-1>=b?(e(a[l],"bc-icon-star"),e(a[l],"bc-icon-star-half-left"),e(a[l],"bc-icon-star-half-right"),a[l].classList.add("bc-icon-star-hollow"),
--c):c-.5>=b?(e(a[l],"bc-icon-star"),e(a[l],"bc-icon-star-hollow"),e(a[l],"bc-icon-star-half-right"),a[l].classList.add("bc-icon-star-half-right"),c-=.5):(e(a[l],"bc-icon-star-hollow"),e(a[l],"bc-icon-star-half-left"),e(a[l],"bc-icon-star-half-right"),a[l].classList.add("bc-icon-star")))};return{init:function(a,c,e,h,l){a="string"===typeof a?document.getElementsByClassName(a):Array.isArray(a)?a:[a];var k=!1;"function"===typeof e&&(k=e);for(e=0;e<a.length;e+=1){var g=a[e].getElementsByTagName("i"),
w=a[e].getElementsByTagName("input")[0],p,q,n,u,r,t;"object"===("undefined"===typeof c?"undefined":C(c))?(p=c.asin,q=c.rating,n=c.ratingType,u=c.direction,r=c.appAction,t=c.appActionToken,w=a[e].getElementsByTagName("input")[0],w.setAttribute("data-rating",q)):(p=w.getAttribute("data-asin"),q=parseFloat(w.getAttribute("data-rating"),10),n=w.getAttribute("data-rating-type"),u=w.getAttribute("data-direction"),r=w.getAttribute("data-app-action"),t=w.getAttribute("data-app-action-token"));d(a[e],q,u,
!1);for(w=0;w<g.length;w+=1)q="left"===u?w+1:5-w,g[w].onmouseover=function(a,b,c){return function(){d(a,b,c,!1)}}(a[e],q,u),g[w].onmouseout=function(a,b){return function(){var c=a.getElementsByTagName("input")[0];d(a,parseFloat(c.getAttribute("data-rating"),10),b,!1)}}(a[e],u),g[w].onclick=function(a,c,e,f,m,H){var g=a.getElementsByTagName("input")[0];return k?function(){var b=parseFloat(g.getAttribute("data-rating"),10);g.setAttribute("data-rating",e);k({asin:c,rating:e,ratingType:f,appAction:m,
appActionToken:H})||d(a,b,u,!0)}:function(){var k=parseFloat(g.getAttribute("data-rating"),10);g.setAttribute("data-rating",e);b({asin:c,rating:e,ratingType:f,appAction:m,appActionToken:H},function(a){"function"===typeof h&&h(a)},function(b){d(a,k,u,!0);"function"===typeof l&&l(b)})}}(a[e],p,q,n,r,t)}},rate:b,setRating:d}});"use strict";g.when("ready","desktop").register("tooltipInit",function(){function c(b){var d=b.querySelector(".bc-tooltip");if(d){var a=d.classList.contains("bc-tooltip-top")||
d.classList.contains("bc-tooltip-bottom");return function(){var c=(new Date).valueOf();""===d.id?(b.firstElementChild.setAttribute("aria-describedby","tooltip"+c),d.id="tooltip"+c):b.firstElementChild.setAttribute("aria-describedby",d.id);d.classList.remove("bc-hidden");a?d.style.left=(b.offsetWidth-d.offsetWidth)/2+"px":d.style.top=(b.offsetHeight-d.offsetHeight)/2+"px"}}return null}function b(b){var d=b.querySelector(".bc-tooltip");return d?function(){d.classList.add("bc-hidden")}:null}return function(e,
d,a){e=a?e.getElementsByClassName(d):e.querySelectorAll(d);for(d=0;d<e.length;d++)a=e[d],a.addEventListener("mouseover",c(a)),a.addEventListener("mouseout",b(a)),a.addEventListener("focus",c(a),!0),a.addEventListener("blur",b(a),!0)}});g.when("tooltipInit").execute(function(c){c(document,".bc-trigger-tooltip")});"use strict";(function(c){c.register("accordionInit",function(){function b(a,b){b.classList.remove("bc-accordion-active");a.setAttribute("aria-expanded","false")}function c(a){return function(d){d.preventDefault();
d=a.parentElement;if(d.classList.contains("bc-accordion-exclusive"))for(var c=0;c<d.children.length;c++)a!==d.children[c]&&b(this,d.children[c]);a.classList.contains("bc-accordion-active")?b(this,a):(a.classList.add("bc-accordion-active"),this.setAttribute("aria-expanded","true"))}}function d(a){var b=c(a);return function(a){32===a.keyCode&&(a.preventDefault(),b())}}return function(a){a=a.querySelectorAll(".bc-accordion-row");for(var b=0;b<a.length;b++){var m=a[b].querySelector(".bc-accordion-header");
m.addEventListener("click",c(a[b]));m.addEventListener("keydown",d(a[b]))}}});c.when("accordionInit","ready").execute(function(b){b(document)})})(g);"use strict";g.when("live","ready").register("expanders",function(c){function b(b){var a=b.querySelector(".bc-expander-inner"),c=b.getAttribute("data-bc-expander-height");b.classList.contains("bc-expander-inactive")?a.style.height=c+"px":a.style.height="auto"}var e=function(d){for(;d;){if(d.classList.contains("bc-expander-link")){d=d.parentNode;d.classList.toggle("bc-expander-inactive");
d.classList.contains("bc-expander-partial-collapse")&&b(d);break}d=d.parentNode}};c("click",".bc-expander-link",function(b){e(b.target)});c("keydown",".bc-expander-link",function(b){32===b.keyCode&&(e(b.target),b.preventDefault())});return{init:function(c){c=c.querySelectorAll(".bc-expander-partial-collapse");for(var a=0;a<c.length;a++){var e=c[a],m=e.querySelector(".bc-expander-inner"),h=m.clientHeight,l=e.getAttribute("data-bc-expander-height"),k=e.querySelector(".bc-expander-link");h<l?(k.classList.remove("bc-pub-inline-block"),
k.classList.add("bc-hidden")):(b(e),e.querySelector(".bc-expander-fade")||m.insertAdjacentHTML("afterend",'\x3cdiv class\x3d"bc-expander-fade"\x3e\x3c/div\x3e'),k.classList.contains("bc-hidden")&&(k.classList.add("bc-pub-inline-block"),k.classList.remove("bc-hidden")))}}}});g.when("expanders").execute(function(c){c.init(document)});"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,
a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.register("Overlay",function(){var c=function(){function b(c){var d=1<arguments.length&&arguments[1]!==v?arguments[1]:"default";r(this,b);this._container=c;this._overlayType=d;n.getComputedStyle&&"static"===n.getComputedStyle(c).position&&(c.style.position="relative");this._container.classList.add("bc-overlay-type-"+d);this._overlay=document.createElement("div");this._overlay.classList.add("bc-overlay");this._container.appendChild(this._overlay);
this._content=document.createElement("div");this._content.classList.add("bc-overlay-content");this._overlay.appendChild(this._content);for(var d=arguments.length,a=Array(2<d?d-2:0),f=2;f<d;f++)a[f-2]=arguments[f];this.setContent.apply(this,a)}t(b,null,[{key:"create",value:function(c,d,a){return new b(c,d,a)}}]);t(b,[{key:"setContent",value:function(){this._content.innerHTML="";for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];null!=c&&c.filter(function(a){return null!=a}).map(function(a){return"string"===
typeof a?document.createTextNode(a):a}).forEach(this._content.appendChild.bind(this._content))}},{key:"remove",value:function(){this.stop();this._container.removeChild(this._overlay)}}]);return b}();c.DISPLAY_TYPE_DEFAULT="default";c.DISPLAY_TYPE_TRANSPARENT="transparent";return c});"use strict";(function(c){c.when("ready").register("triggerFinder",function(){return function(b,c,d){if(b=b.querySelectorAll(c))for(c=0;c<b.length;c++)if(b[c].getAttribute("data-trigger")){var a=b[c].querySelector("#"+
b[c].getAttribute("data-trigger"));a?d(a):console.error("data trigger object not found.")}else console.error("trigger found not data-trigger set")}});c.when("ready").register("Player",function(){var b=null;return b=new function(){var b=null,c=null,a=function(){var a=-1;"Microsoft Internet Explorer"===navigator.appName&&null!==/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return-1<a&&9>a?!0:!1}(),f=function(a){a=a?document.createElement("bgsound"):document.createElement("AUDIO");
a.id="webPlayer";return document.body.appendChild(a)}(a);return{load:function(b){f.setAttribute("type","audio/mpeg");f.setAttribute("src",b);a||f.play()},play:function(){f.play()},pause:function(){a?f.src="":f.pause()},getSRC:function(){return f.src},getTimeLeft:function(){return f.duration-f.currentTime},buffer:function(a){f.setAttribute("type","audio/mpeg");f.setAttribute("autoplay",!1);f.setAttribute("src",a)},instance:function(){return f},isPlaying:function(){return!f.paused},onEnd:function(a){return f.addEventListener("ended",
a,!1)},reset:function(){var a=f,b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);f=b},trigger:{set:function(a){b=a},get:function(){return b}},resetUI:{set:function(a){c=a},get:function(){return c}}}}});c.when("Player").register("initPlayer",function(b){function c(d,e){function k(){var c=b.trigger.get(),k=b.instance(),q=m();if(c&&c===d)b.isPlaying()?(e(d,"pause"),b.pause()):(e(d,"play"),b.play());else{if(c){if(c.classList.contains("bc-audio-button-has-countdown")){var n=c.querySelector(".bc-audio-button-text"),
u=n.querySelector(".bc-audio-button-countdown-text");n.classList.add("bc-hidden");u.innerHTML="";k.removeEventListener("timeupdate",a,!1)}k.removeEventListener("ended",q,!1);k.removeEventListener("canplay",f,!1);e(c,"pause")}b.trigger.set(d);b.load(g);e(d,"load");k.addEventListener("ended",q,!1);k.addEventListener("canplay",f,!1)}}a=function(){var a=b.trigger.get(),c=isNaN(b.getTimeLeft())?0:b.getTimeLeft(),d;d=Math.floor(c/3600);var e=Math.floor(c%3600/60),c=Math.floor(c%3600%60);d=(0<d?d+":"+(10>
e?"0":""):"")+e+":"+(10>c?"0":"")+c;a.querySelector(".bc-audio-button-countdown-text").innerHTML="- "+d};f=function(){var c=b.trigger.get(),d=b.instance();e(c,"play");c.classList.contains("bc-audio-button-has-countdown")&&(c.querySelector(".bc-audio-button-text").classList.remove("bc-hidden"),d.addEventListener("timeupdate",a,!1))};m=function(){return function(){var a=b.trigger.get();e(a,"pause")}};var g=d.getAttribute("data-mp3");g?d.addEventListener("click",k,!1):console.error("No mp3 definition found")}
function d(a,b){var c=a.getElementsByClassName("bc-icon")[0];if(c)switch(b){case "play":c.classList.remove("bc-icon-play");c.classList.add("bc-icon-pause");break;case "pause":c.classList.add("bc-icon-play"),c.classList.remove("bc-icon-pause")}else{var c=a.querySelector(".bc-audio-button-play"),d=a.querySelector(".bc-audio-button-pause"),e=a.querySelector(".bc-audio-button-spinner");switch(b){case "load":a.disabled=!0;c.classList.add("bc-hidden");d.classList.add("bc-hidden");e.classList.remove("bc-hidden");
break;case "play":a.disabled=!1;c.classList.add("bc-hidden");e.classList.add("bc-hidden");d.classList.remove("bc-hidden");break;case "pause":a.disabled=!1,d.classList.add("bc-hidden"),e.classList.add("bc-hidden"),c.classList.remove("bc-hidden")}}}var a,f,m;return function(a){c(a,d)}});c.when("Player","aud-ajax").register("initPlayerButton",function(b,c){function d(a,d){function h(){var a=b.trigger.get();if(!isNaN(b.getTimeLeft())&&(a=a.querySelector(".bc-button-audio-countdown-text"))){var c=b.getTimeLeft(),
d=Math.floor(c/3600),e=Math.floor(c%3600/60),c=Math.floor(c%3600%60);a.innerHTML=(0<d?d+":"+(10>e?"0":""):"")+e+":"+(10>c?"0":"")+c}}function l(a){a&&c({url:a},function(){})}function k(){var a=b.trigger.get(),c=b.instance();d(a,"play");c.addEventListener("timeupdate",h,!1);c.addEventListener("ended",function(){d(a,"reset")},!1)}function g(c){var e=b.trigger.get();c.preventDefault?c.preventDefault():c.returnValue=!1;e&&e===a?b.isPlaying()?(d(a,"pause"),b.pause(),l(q)):(d(a,"play"),b.play(),l(p)):(e&&
(c=b.resetUI.get())&&c(),b.trigger.set(a),b.resetUI.set(function(){d(b.trigger.get(),"reset");b.reset()}),b.load(r),d(a,"load"),b.instance().addEventListener("canplay",k,!1),l(p))}var n=a.querySelector("button"),p=n.getAttribute("data-play-ajax-url"),q=n.getAttribute("data-pause-ajax-url"),r=n.getAttribute("data-mp3");r?a.addEventListener("click",g,!1):console.error("No mp3 definition found")}function a(a,b){var c=a.querySelector(".bc-button-player-icon-pause"),d=a.querySelector(".bc-button-player-icon-play"),
e=a.querySelector(".bc-button-player-label-play"),g=a.querySelector(".bc-button-player-image"),n=a.querySelector(".bc-button-audio-countdown-text");switch(b){case "load":a.disabled=!0;c.classList.add("bc-hidden");d.classList.add("bc-hidden");e.classList.add("bc-hidden");g.classList.remove("bc-hidden");break;case "pause":a.disabled=!1;c.classList.add("bc-hidden");d.classList.remove("bc-hidden");e.classList.add("bc-hidden");g.classList.add("bc-hidden");break;case "play":a.disabled=!1;c.classList.remove("bc-hidden");
d.classList.add("bc-hidden");e.classList.add("bc-hidden");g.classList.add("bc-hidden");break;case "reset":a.disabled=!1,c.classList.add("bc-hidden"),d.classList.remove("bc-hidden"),e.classList.remove("bc-hidden"),n.innerHTML="",g.classList.add("bc-hidden")}}return{init:function(b){d(b,a)},template:a,play:function(c){if("undefined"==c)throw"No element was defined";var d=c.querySelector("button").getAttribute("data-mp3");d&&(b.load(d),a(c,"play"))},pause:function(){b.trigger.get()&&(b.pause(),a(element,
"pause"))}}});c.when("triggerFinder","initPlayer","initPlayerButton","ready").register("initAllPlayers",function(b,c,d){b(document,".bc-trigger-player",c);b(document,".bc-trigger-playerbutton",d.init)})})(g);"use strict";g.when("ready").register("progressBar",function(){return{setActive:function(c,b){c.setAttribute("aria-valuenow",b);c=c.querySelectorAll(".bc-progress-segment");b--;for(var e=0;e<c.length;e++)e<b?(c[e].classList.remove("bc-segment-active"),c[e].classList.add("bc-segment-complete")):
(e==b?c[e].classList.add("bc-segment-active"):c[e].classList.remove("bc-segment-active"),c[e].classList.remove("bc-segment-complete"))}}});"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("debounce","boxUtility","live","StrictEvents","desktop").register("popover",function(c,b,e,d){function a(){var a=
b.getViewportBox();return 10<=Math.sqrt(Math.pow(D-a.top,2)+Math.pow(G-a.left,2))}function f(a){if(a){var b=a.getAttribute("data-trigger");if(b&&(b=F[b]||m(document.getElementById(b))))return b._setTriggerElement(a),b}}function m(a){if(a){var b=F[a.id];return b?b:new J(a)}}var h={up:["up","down","left","right"],down:["down","up","left","right"],left:["left","right","up","down"],right:["right","left","down","up"]},l={horizontal:{orthoAxis:"vertical",size:"width",offsetSize:"offsetWidth",clientSize:"clientWidth",
position:"left"},vertical:{orthoAxis:"horizontal",size:"height",offsetSize:"offsetHeight",clientSize:"clientHeight",position:"top"}},k={up:{axis:"vertical",isBefore:!0,popoverClass:"bc-popover-top"},down:{axis:"vertical",isBefore:!1,popoverClass:"bc-popover-bottom"},left:{axis:"horizontal",isBefore:!0,popoverClass:"bc-popover-left"},right:{axis:"horizontal",isBefore:!1,popoverClass:"bc-popover-right"}},g={top:"up",bottom:"down"},w={horizontal:{width:16,height:16},vertical:{width:16,height:16}},p=
document.querySelector(".adbl-page"),q=document.createElement("div");q.classList.add("bc-popover-container");document.body.appendChild(q);var z=null,u=null,F={},J=function(a){function c(a){r(this,c);var b=y(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,["show","hide","hideNow"]));b.element=a;b.triggerElement=a.closest(".bc-trigger");b.currentTrigger=null;b.id=a.id;F[b.id]=b;b.isHidden=!0;b._isAbsolute=!!b.element.getAttribute("data-bodylevel");b._isAbsolute&&q.appendChild(b.element);b._showTimeout=
null;b._lastShownAt=0;b.__isTouchModeEnabled=null;b._touchModeTimeout=null;b._preventDefaultOnClick=null;a=parseFloat(b.element.getAttribute("data-width"));isNaN(a)||(b._fixedWidth=a,b.element.style.width=b._fixedWidth+"px");b._isHoverable=b.element.classList.contains("bc-hoverable");a=b.element.getAttribute("data-popover-position");a in g&&(a=g[a]);b._directions=h[a||"down"];b._direction=null;b._directionProps=null;return b}x(c,a);t(c,[{key:"_setTriggerElement",value:function(a){this.currentTrigger=
a}},{key:"handleEvent",value:function(a){var b=1<arguments.length&&arguments[1]!==v?arguments[1]:!1;if("touchstart"===a.type||"touchend"===a.type)this._enableTouchMode();else if("click"===a.type&&this._preventDefaultOnClick&&a.preventDefault(),this._isTouchModeEnabled())return;a&&(b?this._handleDocumentEvent(a):this._handlePopoverEvent(a))}},{key:"_handleDocumentEvent",value:function(a){a.target.closest(".bc-popover, .bc-trigger-popover")||"mouseup"!==a.type&&"touchend"!==a.type||this.hideNow()}},
{key:"_handlePopoverEvent",value:function(a){var b=this;if(a.target===this.element||!this.triggerElement||a.target===this.triggerElement)switch(a.type){case "mouseover":this.show();break;case "mouseout":this.hide();break;case "click":this.toggle();break;case "touchend":this.isHidden?(this.show(),this._preventDefaultOnClick=!0,setTimeout(function(){return b._preventDefaultOnClick=!1},100)):this.hideNow()}}},{key:"show",value:function(a){var b=!1;this.emit("show",Object.assign({cancelShow:function(){return b=
!0}},a));b||(c._cancelHide(),this.isHidden&&(z&&z.hideNow(),this.isHidden=!1,this.currentTrigger&&(this._setPosition(),(a=this.currentTrigger.querySelector("a"))&&a.setAttribute("aria-expanded","true")),this.element.classList.remove("bc-hidden"),z=this,this._lastShownAt=+new Date))}},{key:"hideNow",value:function(a){var b=!1;this.emit("hide",Object.assign({cancelHide:function(){return b=!0}},a));b||(c._cancelHide(),this.isHidden||(this.isHidden=!0,this.element.classList.add("bc-hidden"),this.currentTrigger&&
(a=this.currentTrigger.querySelector("a"))&&a.setAttribute("aria-expanded","false"),this._disableTouchMode(),z===this&&(z=null)))}},{key:"hide",value:function(a){this.isHidden||c.hide(this,a)}},{key:"toggle",value:function(){this.isHidden?this.show():200<new Date-this._lastShownAt&&this.hideNow()}},{key:"_enableTouchMode",value:function(){this._clearTouchModeTimeout();this.__isTouchModeEnabled=!0}},{key:"_disableTouchMode",value:function(){var a=this;this._clearTouchModeTimeout();this._touchModeTimeout=
setTimeout(function(){a.__isTouchModeEnabled=!1},500)}},{key:"_clearTouchModeTimeout",value:function(){null!==this._touchModeTimeout&&clearTimeout(this._touchModeTimeout)}},{key:"_isTouchModeEnabled",value:function(){return this.__isTouchModeEnabled}},{key:"_setPosition",value:function(){if(this.currentTrigger){this.element.style.width="";this.element.style.height="";var a=b.getBox(this.currentTrigger),c=b.getAbsoluteOffset(this.currentTrigger),d=b.getViewportBox();if(c.left>d.left+d.width||c.top>
d.top+d.height||c.left+a.width<d.left||c.top+a.height<d.top)this.hideNow();else{this._direction&&this.element.classList.remove(this._directionProps.popoverClass);var d=this._getPopoverBox(),e=this._getContainer(),h=e&&b.getBox(e),e=e&&b.getAbsoluteOffset(e),h=this._getOrientation(a,c,d,h,e),f=h.getDirection(),h=h.getPosition(),m=k[f],g=l[m.axis],e=l[g.orthoAxis];this._direction=f;this._directionProps=m;this.element.classList.add(m.popoverClass);f=this.element.querySelector(".bc-popover-beak");f.style[g.position]=
"";f.style[e.position]="";var D=w[m.axis];d[g.size]+=D[g.size];m.isBefore&&(h[g.position]-=D[g.size]);m=D[e.size];a=c[e.position]+a[e.size]/2-h[e.position];c=d[e.size];a<m?a=m:a>c-m&&(a=c-m);f.style[e.position]=a+"px";a=h.left;c=h.top;this._isAbsolute||(h=b.getAbsoluteOffset(this.element.parentElement),a-=h.left,c-=h.top);this.element.style.width=d.width+"px";this.element.style.height=d.height+"px";this.element.style.left=a+"px";this.element.style.top=c+"px"}}}},{key:"_getOrientation",value:function(a,
b,c,d,e){var h=null,f=[];this._directions.every(function(l){l=new B(l,a,b,c,d,e);f.push(l);return l.doesFit()&&!l.wasOffsetToFit()?(h=l,!1):!0});h||f.forEach(function(a){if(null===h||!a.doesFit()&&!h.doesFit()&&a.getVisibleArea()>h.getVisibleArea()||a.doesFit()&&!h.doesFit()||a.doesFit()&&Math.abs(a.getOffsetToFit())<Math.abs(a.getOffsetToFit()))h=a});return h}},{key:"_getPopoverBox",value:function(){var a=this.element.style.visibility,c=this.element.style.display;this.element.style.visibility="hidden";
this.element.style.display="block";var d={};if(this._fixedWidth)d.width=this._fixedWidth,this.element.style.width=d.width+"px",d.height=b.getBox(this.element).height;else{d=this.element.querySelector(".bc-popover-inner");if(!d)return;this.element.style.width="2000px";var e=d.style.float;d.style["float"]="left";this.element.style.width=b.getBox(d).width+"px";d.style.float=e;d=b.getBox(this.element)}this.element.style.visibility=a;this.element.style.display=c;return d}},{key:"_getContainer",value:function(){if(this.element)return this.element.closest(".bc-container")||
null}}],[{key:"hide",value:function(a,b){u=setTimeout(function(){u=null;a.hideNow(b)},a._isHoverable?500:0)}},{key:"_cancelHide",value:function(){null!==u&&(clearTimeout(u),u=null)}}]);return c}(d),B=function(){function a(c,d,e,h,f,m){r(this,a);this._direction=c;this._directionProps=k[c];this._axisProps=l[this._directionProps.axis];this._orthoAxisProps=l[this._axisProps.orthoAxis];this._triggerBox=d;this._triggerPosition=e;this._popoverBox=h;this._containerBox=f;this._containerPosition=m;this._viewportBox=
b.getViewportBox();this._doesFit=!0;this._idealPosition=this._getIdealPosition();c=this._getFittedPosition();this._fittedPosition=c.fittedPosition;this._offsetToFit=c.offsetToFit}t(a,[{key:"getDirection",value:function(){return this._direction}},{key:"doesFit",value:function(){return this._doesFit}},{key:"wasOffsetToFit",value:function(){return 0<this._offsetToFit}},{key:"getPosition",value:function(){return this._fittedPosition||this._idealPosition}},{key:"getOffsetToFit",value:function(){return this._offsetToFit}},
{key:"_getIdealPosition",value:function(){var a,b=this._triggerPosition[this._axisProps.position],b=this._directionProps.isBefore?b-this._popoverBox[this._axisProps.size]:b+this._triggerBox[this._axisProps.size],c=null;"vertical"===this._directionProps.axis&&this._containerBox&&this._popoverBox[this._orthoAxisProps.size]>.75*this._containerBox[this._orthoAxisProps.size]&&(c=this._containerPosition[this._orthoAxisProps.position]+this._containerBox[this._orthoAxisProps.size]/2);null===c&&(c=this._triggerPosition[this._orthoAxisProps.position]+
this._triggerBox[this._orthoAxisProps.size]/2);c-=this._popoverBox[this._orthoAxisProps.size]/2;return a={},E(a,this._axisProps.position,b),E(a,this._orthoAxisProps.position,c),a}},{key:"_getFittedPosition",value:function(){var a,b=this._getFittedCoordinate(this._axisProps),c=this._getFittedCoordinate(this._orthoAxisProps),d=c-this._idealPosition[this._orthoAxisProps.position];if(b!==this._idealPosition[this._axisProps.position]||Math.abs(d)>.4*this._popoverBox[this._orthoAxisProps.size])this._doesFit=
!1;return{fittedPosition:(a={},E(a,this._axisProps.position,this._idealPosition[this._axisProps.position]),E(a,this._orthoAxisProps.position,c),a),offsetToFit:d}}},{key:"_getFittedCoordinate",value:function(a){var b=this._idealPosition[a.position],c=b+this._popoverBox[a.size],b=this._getFittedCoordinateGivenBounds(b,c,this._viewportBox[a.position],this._viewportBox[a.position]+this._viewportBox[a.size]),c=b+this._popoverBox[a.size];return this._getFittedCoordinateGivenBounds(b,c,0,p[a.clientSize])}},
{key:"_getFittedCoordinateGivenBounds",value:function(a,b,c,d){var e=a;b-=d;0<b&&(e-=b);a=c-a;0<a&&(e+=a);return e}},{key:"getVisibleArea",value:function(){var a=this._fittedPosition||this._idealPosition;return(Math.min(a.left+this._popoverBox.width,this._viewportBox.left+this._viewportBox.width)-Math.max(a.left,this._viewportBox.left))*(Math.min(a.top+this._popoverBox.height,this._viewportBox.top+this._viewportBox.height)-Math.max(a.top,this._viewportBox.top))}}]);return a}(),D=void 0,G=void 0;document.addEventListener("touchstart",
function(a){a=b.getViewportBox();D=a.top;G=a.left});["mouseup","touchend"].forEach(function(b){return document.addEventListener(b,function(b){!z||"touchend"===b.type&&a()||z.handleEvent(b,!0)})});n.addEventListener("scroll",c(function(){z&&z._setPosition()}));["click","touchstart","touchend"].forEach(function(b){e(b,".bc-trigger-popover",function(b){if("touchend"!==b.type||!a()){var c=f(this);c&&c.handleEvent(b)}})});["mouseover","mouseout"].forEach(function(a){e(a,".bc-trigger-popover, .bc-popover.bc-hoverable",
function(a){var b=this&&(f(this)||m(this));b&&b.handleEvent(a)})});(c=(c=document.querySelector(".bc-trigger-popover:hover"))&&f(c))&&c.show();return{getPopoverFromTriggerElement:f,getPopoverFromElement:m}});"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("Overlay","boxUtility").register("Spinner",
function(c,b){return function(c){function d(a,c,e){r(this,d);var h=document.createElement("img");h.classList.add("bc-spinner");h.setAttribute("src","https://m.media-amazon.com/images/G/01/audibleweb/brickcity/1.0/spinner/spinner._V510656778_.png");var l=document.createElement("div");l.classList.add("bc-overlay-text");null!=e&&(l.innerHTML=e);a=y(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,c,h,l));a._spinnerImage=h;h=b.getBox(a._overlay);a._spinnerImage.style.width=a._spinnerImage.style.height=
Math.min(60,h.width,h.height)+"px";a.stop();return a}x(d,c);t(d,null,[{key:"create",value:function(a,b,c){return new d(a,b,c)}}]);t(d,[{key:"start",value:function(){this._overlay.classList.remove("bc-hidden")}},{key:"stop",value:function(){this._overlay.classList.add("bc-hidden")}}]);return d}(c)});"use strict";g.when("ready").execute(function(){function c(a){var b,c,d;for(d=a.target;d;){if(d.classList&&d.classList.contains("bc-tabs")){b=d.parentNode;break}d=d.parentNode}d=b.querySelectorAll(".bc-tab-heading");
b=b.querySelectorAll(".bc-tab-content");for(var e=0;e<d.length;e++)d[e].querySelector(".bc-tab-bar").classList.remove("bc-tab-heading-active"),d[e].classList.remove("bc-core-active"),d[e].setAttribute("aria-selected",!1),d[e]===a.currentTarget&&(c=e,d[e].querySelector(".bc-tab-bar").classList.add("bc-tab-heading-active"),d[e].classList.add("bc-core-active"),d[e].setAttribute("aria-selected",!0));for(e=0;e<b.length;e++)b[e].classList.add("bc-hidden"),e===c&&b[e].classList.remove("bc-hidden")}for(var b=
function(){return function(a){console.log("fire",a);32===a.keyCode&&(c(a),a.preventDefault())}},e=document.querySelectorAll(".bc-tab-heading"),d=0;d<e.length;d++)e[d].addEventListener("click",c),e[d].addEventListener("keydown",b())});"use strict";g.when("live","trayHelper","transitionEvent","debounce","focus","ready","mobile").register("tray",function(c,b,e,d,a){function f(){var a=document.getElementsByClassName("bc-action-sheet");[].forEach.call(a,function(a,b){a.classList.contains("show-tray")&&
a.classList.remove("show-tray")})}function m(a,b){p?a.addEventListener(p,function K(c){a.removeEventListener(p,K);b()}):setTimeout(b)}function h(){var a=document.getElementsByClassName("adbl-page");return a&&a.length&&a[0]}function l(a,b){m(a,function(){if(a.classList.contains("show-tray")){u=r.scrollTop;var c=h();c&&(t=c.style.display,c.style.display="none");a.style.position="relative";b&&b()}});q=a;g(a);a.style.visibility="visible";n.getComputedStyle(a).transform;a.classList.add("show-tray")}function k(a,
b){m(a,function(){a.classList.contains("show-tray")||(a.style.visibility="hidden",b&&b())});q=null;a.style.position="";a.classList.remove("show-tray");var c=h();c&&(c.style.display=t);r.scrollTop=u}var g=b.setHeight(),w=b.get(),p=e(),q,r=document.scrollingElement||document.documentElement||document.body,u=null,t=null,v,B=d(function(b,c){b="string"===typeof b?document.getElementById(b):b;(c=c||document.activeElement)||(c=document.activeElement&&document.activeElement.closest(".bc-trigger")||document.activeElement);
b===q?(k(b),f(),!v||c.hasAttribute("data-shift-focus")||v.closest(".bc-modal, .bc-tray")||a.change({focusElement:v})()):q?k(q,function(){l(b)}):(l(b),v=c,c.hasAttribute("data-shift-focus")||(c=b.querySelector(a.FOCUSABLE_SELECTOR))&&a.change({focusElement:c,focusContainer:b,isFocusOnLayer:!0})())});c("click",".bc-trigger-tray",function(){var a=w(this);a&&B(a,this)});n.addEventListener("resize",function(){q&&g(q)});return{init:function(a){var b=document.getElementById("bc-outside-container");a=a.querySelectorAll(".bc-tray");
for(var c,d=0;d<a.length;d++)c=a[d],c.style.visibility="hidden",c.parentNode!==b&&b.appendChild(c)},toggle:B,isTray:function(a){return a&&a.classList&&a.classList.contains("bc-tray")},open:function(a){a&&a.classList.contains("show-tray")||B(a)},close:function(a){a&&a.classList.contains("show-tray")&&B(a)}}});g.when("tray").execute(function(c){document.getElementsByClassName("bc-trigger-tray")&&c.init(document)});"use strict";g.when("ready").register("toastMessage",function(){var c=null;return c=new function(){function b(d,
k){function g(){h.classList.add("toast-hide");h.classList.remove("toast-show");"function"===typeof p&&p();a.innerHTML="";f.innerHTML="";f.style.display="none";p=r=m.onclick=null;if(0<c.length){var d=c.pop();n.setTimeout(function(){b(d.message,d.options)},500)}}var r=4E3,p=null;d?(a.innerHTML=d,h.classList.add("toast-show"),h.classList.remove("toast-hide"),k&&(k.action&&(f.innerHTML=k.action,f.style.display=""),k.actionCallBack&&(m.onclick=k.actionCallBack),k.duration&&(r=k.duration),k.callback&&(p=
k.callback)),n.setTimeout(g,r)):console.error("No Message was passed")}var c=[],d=document.createElement("div");d.setAttribute("id","toast");d.setAttribute("class","toast-hide");var a=document.createElement("span");a.setAttribute("class","toast-message");a.setAttribute("role","alert");var f=document.createElement("span");f.setAttribute("class","toast-action-message bc-text bc-size-base");f.style.display="none";var m=document.createElement("a");m.setAttribute("class","bc-link");m.appendChild(f);d.appendChild(a);
d.appendChild(m);var h=document.body.appendChild(d);return function(a,d){h.classList.contains("toast-show")?c.unshift({message:a,options:d}):b(a,d)}}});"use strict";g.when("live","ready").register("ratingStars",function(c){var b=function(a,b,c){b=b.querySelectorAll(".bc-rating-star");for(var d=b.length,e=0;e<d;e++){var g=b[e].children[0];e<a?(g.classList.add("bc-icon-star","active"===c?"bc-color-active":"bc-color-progress"),g.classList.remove("bc-icon-star-hollow","bc-color-tertiary","active"===c?
"bc-color-progress":"bc-color-active")):(g.classList.remove("bc-icon-star","bc-color-active","bc-color-progress"),g.classList.add("bc-icon-star-hollow","bc-color-tertiary"))}},e=function(a,c){var d=c.querySelector(".star-count"),e;e=new CustomEvent("bc-rating-star-update",{detail:{starCount:a}});a!==c.getAttribute("data-star-count")&&(c.setAttribute("data-star-count",a),null!==d&&(d.value=a));c.dispatchEvent(e);b(a,c,"progress")},d=function(b){if(b=a(b.target)){for(var c=b.getAttribute("data-index"),
d=b.parentElement.querySelectorAll(".bc-rating-star"),l=0;l<d.length;l++){var k=d[l];k.getAttribute("aria-checked")&&k.setAttribute("aria-checked",!1)}b.setAttribute("aria-checked",!0);e(c,b.parentElement)}},a=function m(a){return a.classList.contains("bc-rating-star")?a:a.classList.contains("bc-rating-stars")?v:m(a.parentElement)};c("click",".bc-rating-star",function(a){d(a)});return{toggleStars:b,setStarCount:e,starClickEvent:d,init:function(a,b){a=(a||document).getElementsByClassName("bc-rating-stars");
for(var c=a.length,d=0;d<c;d++)e(a[d].getAttribute("data-star-count"),a[d]),b&&b(a[d])}}});g.when("desktop").execute(function(){g.when("ratingStars","tooltipInit","live").register("ratingStarsInit",function(c,b,e){var d=function(a){var b=function(b){b=a.getAttribute("data-index");c.toggleStars(b,a.parentElement,"active");a.parentElement.parentElement.getElementsByClassName("bc-tooltip-message")[0].innerHTML=a.getAttribute("data-text")},d=function(b){"5"===b.target.getAttribute("data-index")&&(b=a.parentElement.getAttribute("data-star-count"),
c.toggleStars(b,a.parentElement,"progress"))};a.removeEventListener("mouseenter",b);a.removeEventListener("focus",b);a.removeEventListener("blur",d);a.addEventListener("mouseenter",b);a.addEventListener("focus",b);a.addEventListener("blur",d)},a=function(a){var b=function(b){b=a.getAttribute("data-star-count");c.toggleStars(b,a,"progress")};a.removeEventListener("mouseleave",b);a.removeEventListener("blur",b);a.addEventListener("mouseleave",b);a.addEventListener("blur",b)},f=function(b){c.init(b,
function(b){for(var c=b.children,e=c.length,f=0;f<e;f++){var g=b;d(c[f]);a(g)}})};e("keydown",".bc-rating-star",function(a){32===a.keyCode&&(c.starClickEvent(a),a.preventDefault())});f(document);return{setStarCount:c.setStarCount,attachStarEvents:function(a){f(a);b(a,"bc-trigger-tooltip",!0)}}})});g.when("mobile").execute(function(){try{g.when("ratingStars").register("ratingStarsInit",function(c){var b=function(b,a){var c=function(c){c=a.parentElement;var e=c.getElementsByClassName("mobile-rating-star-text")[0],
f=document.createElement("SPAN");f.className="mobile-rating-star-text bc-pub-inline-block";var k=document.createElement("SPAN");k.className="bc-letter-space bc-letter-space-base";var g=document.createElement("SPAN");g.className="bc-text-bold bc-text bc-size-base bc-color-base";g.innerHTML=b.getAttribute("data-text");f.appendChild(k);f.appendChild(g);e&&c.removeChild(e);c.appendChild(f)};b.removeEventListener("touchend",c);b.addEventListener("touchend",c)},e=function(d){c.init(d,function(a){for(var c=
a.children,d=c.length,e=0;e<d;e++)b(c[e],a)})};e(document);return{setStarCount:c.setStarCount,attachStarEvents:e}})}catch(c){}});"use strict";g.register("slider",function(){return function(c){var b,e;if(!c&&0>c.nodeType)return console.error("element is not available in the DOM"),null;b=c.querySelector("[type\x3drange]");e=c.querySelector(".bc-range-progress");if(!b||!e)return console.error("malformed slider element"),null;var d=function(a){e.style.width=a.target.value+"%"};return{init:function(){b.addEventListener("input",
d);b.addEventListener("change",d)},destroy:function(){b.removeEventListener("input",d);b.removeEventListener("change",d)},setValue:function(a){a=parseInt(a);a!==b.value&&(b.value=a,b.dispatchEvent(new Event("change")))},up:function(a){b.value=parseInt(b.value)+a;b.dispatchEvent(new Event("change"))},down:function(a){b.value=parseInt(b.value)-a;b.dispatchEvent(new Event("change"))}}}});g.when("slider","ready").register("initSlider",function(c){return function(b){b=b.querySelectorAll(".bc-range");[].forEach.call(b,
function(b){c(b).init()})}});g.when("initSlider").execute(function(c){c(n.document)});"use strict";g.when("processing","focus","promise","outsideContainer","ready").register("modalElement",function(c,b){return new function(){function e(){var a=q.getAttribute("data-overlayClass");q.classList.contains("show")?(p.classList.add("bc-overlay-visible"),document.body.classList.add("bc-locked"),a&&p.classList.add(a)):(p.classList.remove("bc-overlay-visible"),document.body.classList.remove("bc-locked"),a&&
p.classList.contains(a)&&p.classList.remove(a))}function d(){return q?q.classList.contains("bc-modal-closeable"):!1}function a(){q&&g(q)}function f(){if(!q)throw"no current modal";q.classList.remove("show");e()}function g(a){q!==a&&(t=q,q=a);t&&(t.classList.remove("show"),u.appendChild(t),u=q.parentNode,t=null,x=document.activeElement);q.classList.contains("show")?(q.classList.remove("show"),u.appendChild(q),x&&x.focus()):(x=document.activeElement,q.classList.add("show"),u=q.parentNode,y.appendChild(q));
e()}function h(a){if(a===v)throw"No element was Provided ";if(null===a.getAttribute("data-trigger"))throw"No ID was provided";a=document.getElementById(a.getAttribute("data-trigger"));if(!a)throw"Modal element cannot be found";return a}function l(){var a=document.querySelector("#bc-modal-overlay");return null===a?(a=document.createElement("div"),a.setAttribute("id","bc-modal-overlay"),a.className="bc-overlay-legacy",document.body.appendChild(a)):a}function k(){var a=document.querySelector("#bc-outside-container");
return null===a?(a=document.createElement("div"),a.setAttribute("id","bc-outside-container"),document.body.appendChild(a)):a}function n(a,b,d){b=b||q;d=d||{mode:"no-cors"};var e=new c(b);e.activate();return fetch(a,d).then(function(a){return a.text()}).then(function(a){e.deactivate();b.querySelector(".bc-modal-content-overflow").innerHTML=a})}function r(a){a.querySelector(".bc-modal-content-overflow").addEventListener("scroll",function(){var b=a.querySelector(".bc-modal-header"),c=a.querySelector(".bc-modal-content-overflow");
0<c.scrollTop&&!b.classList.contains("bc-modal-header-shadow")&&b.classList.add("bc-modal-header-shadow");0===c.scrollTop&&b.classList.contains("bc-modal-header-shadow")&&b.classList.remove("bc-modal-header-shadow")})}var p,q=null,t=null,u=null,y=null,x=null;return{init:function(c){p=l();y=k();[].forEach.call(c.getElementsByClassName("bc-trigger-modal"),function(a){var c=h(a);b.trapFocus(c);var e=function(){};if(!a.hasAttribute("data-shift-focus")){var l=c.querySelector(b.FOCUSABLE_SELECTOR);l&&(e=
b.change({focusElement:l,isFocusOnLayer:!0}))}var k=function(){g(c);if(c===q){var a=c.querySelector("[modal-async-content]"),a=a&&a.getAttribute("modal-async-content");Promise.resolve(a&&n(a,c)).then(e)}};a.addEventListener("click",function(a){a.preventDefault();k()},!1);a.addEventListener("keydown",function(a){32===a.keyCode&&(a.preventDefault(),k())},!1);c.addEventListener("click",function(a){a.target.classList.contains("bc-modal-closeable")&&d()&&f()},!1);r(c)});[].forEach.call(c.getElementsByClassName("bc-trigger-toggle-modal"),
function(b){b.addEventListener("click",a,!1)})},modal:function(a){if(1>a.nodeType)throw"Not an element in the Document";l();k();modalToggleInstance=function(){g(a);return this};modalFetch=function(a,b){n(a,b);return this};modalToClose=function(){d()&&f();return this};return{toggle:modalToggleInstance,close:modalToClose,fetch:modalFetch}},toggle:g,closeCurrentModal:f,loadContentModal:n,activeModal:function(){return q},isModal:function(a){return a&&a.classList&&a.classList.contains("bc-modal")},open:function(a){a.classList.contains("show")||
g(a)},close:function(a){a.classList.contains("show")&&g(a)}}}});g.when("modalElement","ready").register("modal",function(c){document.getElementsByClassName("bc-trigger-modal")&&c.init(document);return c});"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("StrictEvents").register("FullScreen",
function(c){var b=["fullscreenchange","webkitendfullscreen","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"],e=["requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],d=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],a=void 0,f=void 0;return function(c){function h(c,d){r(this,h);var e=y(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,["open","close"]));e._wrapper=c;e._videoElement=d;e._isOpen=!1;f=h.isSupported();
b.forEach(function(b){document.addEventListener(b,function(b){a!==e||e.isOpen()||e.emit("close")},!1)});return e}x(h,c);t(h,null,[{key:"isSupported",value:function(){var a=document.createElement("video");return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||a.webkitRequestFullScreen)&&!b.every(function(b){return!("on"+b in a)})}}]);t(h,[{key:"isOpen",value:function(){return f?!!(document.fullScreen||
document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement):this._isOpen}},{key:"open",value:function(){this._requestFullScreen();a=this;this.emit("open")}},{key:"close",value:function(){this._exitFullScreen();a=!1;this.emit("close")}},{key:"_requestFullScreen",value:function(){var a=this,b=document.documentElement,c=e.find(function(a){return a in b});c?b[c]().catch(function(){return a._legacyRequestFullScreen()}):this._legacyRequestFullScreen()}},
{key:"_legacyRequestFullScreen",value:function(){f=!1;this._isOpen=!0;this._videoElement.webkitEnterFullscreen}},{key:"_exitFullScreen",value:function(){var a=this,b=d.find(function(a){return a in document});b?document[b]().catch(function(){return a._legacyExitFullScreen()}):this._legacyExitFullScreen()}},{key:"_legacyExitFullScreen",value:function(){this._isOpen=f=!1;document.webkitExitFullscreen()}},{key:"toggle",value:function(){this.isOpen()?this.close():this.open()}}]);return h}(c)});"use strict";
t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("slider","Spinner","Player","FullScreen","StrictEvents").register("Video",function(c,b,e,d,a){return function(a){function g(a){r(this,g);var c=y(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,["play","pause","volumeChange","fullscreen.open",
"fullscreen.close"]));if(!a&&0>a.nodeType)return console.error("element is not available in the DOM"),y(c,null);c.wrapper=a;c.videoEl=a.querySelector("video");c.spinner=new b(c.wrapper);c._played=!1;c.once("play",function(){c._played=!0;c.wrapper.classList.add("bc-video-played")});c._initControls();c._initVideo();c._initFullScreen();c.samplePlayerElement=e.instance();c.samplePlayerElement&&c.samplePlayerElement.addEventListener("play",c.pause.bind(c));return c}x(g,a);t(g,null,[{key:"secondsToHms",
value:function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%3600%60);return(0<b?b+":"+(10>c?"0":""):"")+c+":"+(10>a?"0":"")+a}}]);t(g,[{key:"_initControls",value:function(){var a=this;this.playPauseButton=this.wrapper.querySelector(".bc-video-btn-play");this.playPauseIcon=this.playPauseButton.querySelector(".bc-video-icon");this.poster=this.wrapper.querySelector(".bc-video-poster");this.posterButton=this.wrapper.querySelector(".bc-video-poster-button");this.fullscreenButton=
this.wrapper.querySelector(".bc-video-btn-fullscreen");this.fullscreenIcon=this.fullscreenButton.querySelector(".bc-video-icon");this.seekEl=this.wrapper.querySelector(".bc-video-slider");this.seekInput=this.wrapper.querySelector(".bc-video-slider input");this.timeLabel=this.wrapper.querySelector(".bc-video-time");this.volumeEl=this.wrapper.querySelector(".bc-video-volume");this.volumeInput=this.wrapper.querySelector(".bc-video-volume input");this.volumeButton=this.wrapper.querySelector(".bc-video-btn-volume");
this.volumeIcon=this.volumeButton.querySelector(".bc-video-icon");this.videoControls=this.wrapper.querySelector(".bc-video-controls");this.seekSlider=c(this.seekEl);this.seekSlider.init();this.seekSlider.setValue(0);this.volumeSlider=c(this.volumeEl);this.volumeSlider.init();this.volumeSlider.setValue(100);var b=0;["click","touchend"].forEach(function(c){return a.wrapper.addEventListener(c,function(d){var e=+new Date;100<e-b&&(d.target===a.wrapper||d.target===a.videoEl)&&("touchend"===c&&!a._controlsShowing&&
a._isPlaying||a.togglePlayPause(),a.showControls());b=e})});this.volumeButton.addEventListener("click",this.toggleMute.bind(this));this.playPauseButton.addEventListener("click",this.togglePlayPause.bind(this));this.poster&&this.poster.addEventListener("click",this.togglePlayPause.bind(this));this.posterButton&&this.posterButton.addEventListener("click",this.togglePlayPause.bind(this));this.seekInput.addEventListener("input",function(b){a.videoEl.currentTime=b.target.value*a.videoEl.duration/100});
this.volumeInput.addEventListener("input",function(b){b=a.volumeInput.value/100;a.videoEl.muted=!1;a.videoEl.volume=b});document.documentElement.addEventListener("focus",function(b){a.videoControls.contains(b.target)?a.wrapper.classList.add("tab"):a.wrapper.classList.remove("tab")},!0);this.on("play",function(b){a._isPlaying=!0;a.playPauseIcon.classList.remove("bc-icon-play");a.playPauseIcon.classList.add("bc-icon-pause");a.playPauseButton.setAttribute("aria-label","pause")});this.on("pause",function(b){a._isPlaying=
!1;a.playPauseIcon.classList.remove("bc-icon-pause");a.playPauseIcon.classList.add("bc-icon-play");a.playPauseButton.setAttribute("aria-label","play")});this.on("volumeChange",function(b,c){a.volumeIcon.classList.remove(a._currentVolumeButtonClass||"volume-high");b="high";5>c.percentage||c.muted?b="off":32>c.percentage?b="low":65>c.percentage&&(b="medium");a.volumeSlider.setValue(c.muted?0:c.percentage);a._currentVolumeButtonClass="bc-icon-volume-"+b;a.volumeIcon.classList.add(a._currentVolumeButtonClass)});
this._initShowHideControls()}},{key:"_initShowHideControls",value:function(){var a=this,b=!1,c=void 0,d=function(){a._played&&(clearTimeout(c),a.showControls(),f())},e=function(){clearTimeout(c);!b&&a._isPlaying&&a.hideControls()},f=function(){clearTimeout(c);c=setTimeout(e,3E3)};this.wrapper.addEventListener("mousemove",d);this.videoControls.addEventListener("mouseenter",function(){return b=!0});this.videoControls.addEventListener("mouseleave",function(){return b=!1});this.wrapper.addEventListener("mouseleave",
function(){return b=!1});this.on("play",f);this.on("pause",d);this.on("fullscreen.open",f);this.on("fullscreen.close",f)}},{key:"_initVideo",value:function(){var a=this;["play","playing"].forEach(function(b){return a.videoEl.addEventListener(b,function(b){return a.emit.bind(a,"play")})});["pause","ended","waiting"].forEach(function(b){return a.videoEl.addEventListener(b,function(b){return a.emit.bind(a,"pause")})});this.videoEl.addEventListener("volumechange",this._volumeChanged.bind(this));this.videoEl.addEventListener("timeupdate",
function(b){b=a.videoEl.duration;var c=a.videoEl.currentTime,d=isNaN(b-c)?0:b-c;a.timeLabel.innerHTML=g.secondsToHms(d);a.seekSlider.setValue(Math.round(100*c/b))});this.videoEl.addEventListener("progress",function(b){b=a.videoEl.buffered.length;b=0<b?a.videoEl.buffered.end(b-1):0;b!==a.videoEl.duration&&(a.videoEl.currentTime>b?a.spinner.start():a.spinner.stop())})}},{key:"_initFullScreen",value:function(){var a=this,b=this._fullScreen=new d(this.wrapper,this.videoEl);this.fullscreenButton.addEventListener("click",
b.toggle.bind(b),!1);b.on("open",function(b){a.fullscreenIcon.classList.remove("bc-icon-maximize-screen");a.fullscreenIcon.classList.add("bc-icon-minimize-screen");a.fullscreenButton.setAttribute("aria-label","minimize video");a.wrapper.classList.add("fullscreen");a.emit("fullscreen.open")});b.on("close",function(b){a.fullscreenIcon.classList.add("bc-icon-maximize-screen");a.fullscreenIcon.classList.remove("bc-icon-minimize-screen");a.fullscreenButton.setAttribute("aria-label","maximize video");a.wrapper.classList.remove("fullscreen");
a.emit("fullscreen.close")})}},{key:"_volumeChanged",value:function(){this.emit("volumeChange",{percentage:100*this.videoEl.volume,muted:this.videoEl.muted})}},{key:"showControls",value:function(){this._controlsShowing||(this.wrapper.classList.add("active"),this._controlsShowing=!0)}},{key:"hideControls",value:function(){this._controlsShowing&&(this._controlsShowing=!1,this.wrapper.classList.remove("active"),this.wrapper.classList.remove("tab"))}},{key:"play",value:function(){this.samplePlayerElement&&
this.samplePlayerElement.pause();this.videoEl.play();this.showControls();this.emit("play")}},{key:"pause",value:function(){this.videoEl.pause();this.emit("pause")}},{key:"togglePlayPause",value:function(){this._isPlaying?this.pause():this.play()}},{key:"toggleMute",value:function(){this.videoEl.muted?this.videoEl.muted=!1:this.videoEl.volume?this.videoEl.muted=!0:this.videoEl.volume=1;this._volumeChanged()}}]);return g}(a)});g.when("Video").execute(function(c){[].forEach.call(document.getElementsByClassName("bc-video"),
function(b){b.classList.contains("bc-video-initialized")||(b.classList.add("bc-video-initialized"),new c(b))})});"use strict";t=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("boxUtility","debounce","ready").register("StickyHeader",function(c,b){var e=function(){function d(a,b){r(this,d);this.triggerElement=
a;this.stickyElement=b;this.start()}t(d,[{key:"start",value:function(){n.addEventListener("scroll",b(this.scrollHandler.bind(this),100));this.scrollHandler()}},{key:"show",value:function(){this.stickyElement.classList.add("bc-sticky-header-active")}},{key:"hide",value:function(){this.stickyElement.classList.remove("bc-sticky-header-active")}},{key:"scrollHandler",value:function(){var a=c.isInView(this.triggerElement),b=0>c.getViewportOffset(this.triggerElement).top;!a&&b?this.show():this.hide()}}],
[{key:"initialize",value:function(){var a=document.getElementsByClassName("bc-trigger-sticky"),b=document.getElementsByClassName("bc-sticky-header");Array.prototype.forEach.call(b,function(a){document.body.appendChild(a)});return Array.prototype.map.call(a,function(a){var b=a.dataset&&document.getElementById(a.dataset.trigger);if(b)return new d(a,b)})}}]);return d}();e.initialize();return e});"use strict";g.when("ready","desktop").register("flyoutInit",function(){function c(b){var a=b.getAttribute("data-trigger"),
c=a?b.querySelector("#"+a):null,e=0;return c?function(){c.classList.remove("bc-hidden");if(e!==n.innerWidth){var a=c.offsetWidth;if(0<a){var g=b.offsetWidth,k=b.offsetLeft;if(1020!==a)c.style.left=k+g/2-a/2-10+"px";else{var a=document.querySelector(".bc-container").offsetLeft,r=c.querySelector(".bc-flyout-beak");c.style.left=a+"px";r.style.left=k-a+g/2-10+5+"px"}}e=n.innerWidth}}:null}function b(b){var a=(b=b.getAttribute("data-trigger"))?document.getElementById(b):null;return a?function(){a.classList.add("bc-hidden")}:
null}function e(b){var a=(b=b.getAttribute("data-trigger"))?document.getElementById(b):null;return a?function(){a.classList.toggle("bc-hidden")}:null}return function(d){d=d.querySelectorAll(".bc-trigger-flyout");var a,f=d.length;if(0!==f)for(a=0;a<f;a+=1)if(d[a].getAttribute("data-trigger")){var g=b(d[a]),h=c(d[a]),l=e(d[a]);d[a].addEventListener("mouseover",h);d[a].addEventListener("mouseout",g);d[a].addEventListener("click",l)}}});g.when("flyoutInit").execute(function(c){c(document)});"use strict";
g.when("Spinner").register("processing",function(c){return function(b){n.console&&console.warn&&console.warn("BrickCity.processing is deprecated, see spinner");b=new c(b);return{activate:b.start.bind(b),deactivate:b.stop.bind(b),kill:b.remove.bind(b)}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AudibleBrickCitySkin",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
